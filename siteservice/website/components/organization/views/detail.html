<div layout-fill>
    <md-content layout="column" layout-fill>
        <div layout>
            <div flex="80">
                <p>Organization</p>
                <h1>{{ vm.organization.globalid }}</h1>
            </div>
            <div flex>

            </div>
        </div>
        <div flex layout="column">

            <md-card flex="100">
                <md-card-content flex="100" layout="column">
                    <md-tabs flex="100">
                        <md-tab md-on-select="vm.fetchInvitations()">
                            <md-tab-label><i class="fa fa-user"></i>&nbsp;People</md-tab-label>
                            <md-tab-body layout="row">


                                <md-list class="md-dense">
                                    <md-subheader class="md-no-sticky">Owners</md-subheader>
                                    <md-list-item class="md-1-line" ng-repeat="owner in vm.organization.owners">
                                        <div class="md-list-item-text">
                                            <h4 > {{ owner }}</h4>
                                        </div>
                                    </md-list-item>
                                </md-list>

                                <md-list class="md-dense" ng-if="vm.organization.members.length > 0">
                                    <md-subheader class="md-no-sticky">Members</md-subheader>
                                    <md-list-item class="md-1-line" ng-repeat="member in vm.organization.members">
                                        <div class="md-list-item-text">
                                            <h4>{{ member }}</h4>
                                        </div>
                                    </md-list-item>
                                </md-list>

                                <md-list class="md-dense" ng-if="vm.hasEditPermission && vm.invitations.length > 0">
                                    <md-subheader>Pending invitations</md-subheader>
                                    <md-list-item class="md-1-line" ng-repeat="invite in vm.invitations">
                                        <h4 flex="33" ng-bind="::invite.user"></h4>
                                        <h4 flex="33" class="md-subheader capitalize" ng-bind="::invite.role"></h4>
                                        <h4 flex="33" class="md-subheader"
                                            ng-bind="::invite.created | date : 'd MMM y H:mm:ss'"></h4>
                                    </md-list-item>
                                </md-list>

                                <md-button class="md-primary" ng-click="vm.showInvitationDialog($event)"
                                           ng-if="vm.hasEditPermission">
                                    <i class="fa fa-user-plus"></i> Invite someone
                                    <md-tooltip ng-cloak>Invite someone to join
                                        {{::vm.getOrganizationDisplayname(vm.organization.globalid)}}
                                    </md-tooltip>
                                </md-button>

                            </md-tab-body>
                        </md-tab>
                        <md-tab>
                            <md-tab-label><i class="fa fa-file-text-o"></i>&nbsp;Contracts</md-tab-label>
                            <md-tab-body>
                            </md-tab-body>
                        </md-tab>
                        <md-tab>
                            <md-tab-label><i class="fa fa-sitemap"></i>&nbsp;Structure</md-tab-label>
                            <md-tab-body>
                                <div layout="row" layout-align="end start">
                                    <md-button class="md-primary"
                                           ng-href="#/organizations/{{ vm.organization.globalid }}/newsuborganization">
                                    <i class="fa fa-plus"></i> Create suborganization
                                </md-button>
                                </div>
                                <div class="tree">
                                    <ul ng-repeat="tree in vm.organizationRoot.children">
                                        <ng-include
                                                src="'/components/organization/views/treeItem.html'"></ng-include>
                                    </ul>
                                </div>
                            </md-tab-body>
                        </md-tab>
                        <md-tab flex="100" ng-if="vm.hasEditPermission" md-on-select="vm.fetchAPISecretLabels()">
                            <md-tab-label><i class="fa fa-cog"></i>&nbsp;Settings</md-tab-label>
                            <md-tab-body flex="100">

                                <md-list class="md-dense">
                                    <md-subheader class="md-no-sticky">
                                        <div layout>
                                            <p flex="initial">Domain names</p>
                                            <span flex></span>
                                        </div>
                                    </md-subheader>
                                    <md-list-item class="md-1-line" ng-repeat="dns in vm.organization.dns"
                                                  ng-click="vm.showDNSDialog($event, dns)" aria-label="{{ ::dns }}">
                                        <div class="md-list-item-text" layout="column">
                                            <h3 ng-bind="dns"></h3>
                                        </div>
                                    </md-list-item>
                                </md-list>

                                <md-button class="md-primary" ng-click="vm.showDNSDialog($event)">
                                    <i class="fa fa-plus"></i> Add domain name
                                    <md-tooltip>Add a domain name owned by
                                        {{::vm.getOrganizationDisplayname(vm.organization.globalid)}}
                                    </md-tooltip>
                                </md-button>

                                <md-list class="md-dense">
                                    <md-subheader class="md-no-sticky">
                                        <div layout>
                                            <p flex="initial">API Access secrets<md-tooltip>API Access secrets are needed to access the Itsyou.online api using oauth2</md-tooltip></p>
                                            <span flex></span>
                                        </div>
                                    </md-subheader>
                                    <md-list-item class="md-1-line" ng-repeat="label in vm.apisecretlabels"
                                                  ng-click="vm.showAPISecretDialog($event, label)"
                                                  aria-label="{{ ::label }}">
                                        <div class="md-list-item-text" layout="column">
                                            <h3 ng-bind="label"></h3>
                                        </div>
                                    </md-list-item>
                                </md-list>


                                <md-button class="md-primary" ng-click="vm.showAPICreationDialog($event)">
                                    <i class="fa fa-plus"></i> Add API access secret
                                    <md-tooltip>API Access secrets are needed to access the Itsyou.online api using oauth2</md-tooltip>
                                </md-button>
                            </md-tab-body>
                        </md-tab>
                    </md-tabs>

                </md-card-content>
            </md-card flex>
        </div>
    </md-content>
</div>
